var myApp=angular.module("myApp",["videoServiceProvider","app.routes","mainCtrl","videosCtrl","videoCtrl"]);angular.module("mainCtrl",[]).controller("mainController",function($http,$scope){$http.get("app/model/settings.json").success(function(res){$scope.settings=res})}),angular.module("videoCtrl",[]).controller("videoController",function($http,$scope,$location){var video_id=$location.path().substr(8,$location.path().length-1);console.log(video_id),$http.get("https://www.googleapis.com/youtube/v3/videos?part=snippet&id="+video_id+"&key="+$scope.settings.api_key).success(function(res){"undefined"!=typeof res.items&&"undefined"!=typeof res.items[0].snippet?(console.log(res.items[0].snippet.channelTitle),console.log($scope.settings.channel),res.items[0].snippet.channelTitle===$scope.settings.channel?s(".video").insert('<iframe width="800" height="450" src="http://www.youtube.com/embed/'+video_id+'?autoplay=1&showinfo=0" frameborder="0"></iframe>'):$location.path("/404")):$location.path("/404")})}),angular.module("videosCtrl",[]).controller("videosController",function($http,$scope){function getVideos(){$http.get(" https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails%2C+snippet&playlistId="+$scope.uploadsPlaylistId+"&key="+$scope.settings.api_key).success(function(res){$scope.videos=res.items})}$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.uploadsPlaylistId=res.items[0].contentDetails.relatedPlaylists.uploads,getVideos()})});var route=angular.module("app.routes",["ngRoute"]);route.config(function($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"app/views/home.html"}).when("/videos/",{templateUrl:"app/views/videos.html",controller:"videosController",controllerAs:"videos"}).when("/videos/:video_id",{templateUrl:"app/views/video.html",controller:"videoController",controllerAs:"video"}).when("/404",{templateUrl:"app/views/404.html"})}),angular.module("videoServiceProvider",[]).service("videoService",function($http){});