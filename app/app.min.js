var myApp=angular.module("myApp",["videoServiceProvider","app.routes","mainCtrl","videosCtrl","videoCtrl","playlistsCtrl","playlistCtrl"]);angular.module("mainCtrl",[]).controller("mainController",function($http,$scope){$http.get("app/model/settings.json").success(function(res){$scope.settings=res})}),angular.module("playlistCtrl",[]).controller("playlistController",function($http,$scope,$location,$sce){var playlistId=$location.path().substr(11,$location.path().length-1);$http.get("https://www.googleapis.com/youtube/v3/playlists?part=snippet&id="+playlistId+"&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.playlist=res.items[0],$scope.playlist.player=$sce.trustAsResourceUrl("http://www.youtube.com/embed/videoseries?list="+playlistId+"&autoplay=0&showinfo=0")})}),angular.module("playlistsCtrl",[]).controller("playlistsController",function($http,$scope,$location){function getPlaylists(){$http.get("https://www.googleapis.com/youtube/v3/playlists?part=contentDetails%2csnippet&channelId="+$scope.channelId+"&key="+$scope.settings.api_key).success(function(res){$scope.playlists=res.items})}$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.channelId=res.items[0].id,getPlaylists()})}),angular.module("videoCtrl",[]).controller("videoController",function($http,$scope,$location,$sce){var video_id=$location.path().substr(8,$location.path().length-1);$http.get("https://www.googleapis.com/youtube/v3/videos?part=snippet&id="+video_id+"&key="+$scope.settings.api_key).success(function(res){$scope.video=res.items[0],$scope.video.player=$sce.trustAsResourceUrl("https://www.youtube.com/embed/"+video_id+"?autoplay=0&showinfo=0")})}),angular.module("videosCtrl",[]).controller("videosController",function($http,$scope){function getVideos(){$http.get(" https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails%2C+snippet&playlistId="+$scope.uploadsPlaylistId+"&key="+$scope.settings.api_key).success(function(res){$scope.videos=res.items})}$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.uploadsPlaylistId=res.items[0].contentDetails.relatedPlaylists.uploads,getVideos()})});var route=angular.module("app.routes",["ngRoute"]);route.config(function($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"app/views/home.html"}).when("/videos/",{templateUrl:"app/views/videos.html",controller:"videosController",controllerAs:"videos"}).when("/videos/:video_id",{templateUrl:"app/views/video.html",controller:"videoController",controllerAs:"video"}).when("/playlists/",{templateUrl:"app/views/playlists.html",controller:"playlistsController",controllerAs:"playlists"}).when("/playlists/:playlist_id",{templateUrl:"app/views/playlist.html",controller:"playlistController",controllerAs:"playlist"}).when("/404",{templateUrl:"app/views/404.html"})}),angular.module("videoServiceProvider",[]).service("videoService",function($http){});