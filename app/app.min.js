var myApp=angular.module("myApp",["videoServiceProvider","app.routes","mainCtrl","videosCtrl","videoCtrl","playlistsCtrl","playlistCtrl","homeCtrl"]);angular.module("homeCtrl",[]).controller("homeController",function($http,$scope){}),angular.module("mainCtrl",[]).controller("mainController",function($http,$scope){$http.get("app/model/settings.json").success(function(res){$scope.settings=res})}),angular.module("playlistCtrl",[]).controller("playlistController",function($http,$scope,$location,$sce){var playlistId=$location.path().substr(11,$location.path().length-1);$http.get("https://www.googleapis.com/youtube/v3/playlists?part=snippet&id="+playlistId+"&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.playlist=res.items[0],$scope.playlist.player=$sce.trustAsResourceUrl("http://www.youtube.com/embed/videoseries?list="+playlistId+"&autoplay=0&showinfo=0")})}),angular.module("playlistsCtrl",[]).controller("playlistsController",function($http,$scope,$location){function getPlaylists(){$http.get("https://www.googleapis.com/youtube/v3/playlists?part=contentDetails%2csnippet&channelId="+$scope.channelId+"&key="+$scope.settings.api_key).success(function(res){$scope.playlists=res.items})}$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.channelId=res.items[0].id,getPlaylists()})}),angular.module("videoCtrl",[]).controller("videoController",function($http,$scope,$location,$sce){function setPublishAtDate(){var date=new Date($scope.video.snippet.publishedAt),formattedDate="";switch(date.getMonth()){case 0:formattedDate="January";break;case 1:formattedDate="February";break;case 2:formattedDate="March";break;case 3:formattedDate="April";break;case 4:formattedDate="May";break;case 5:formattedDate="June";break;case 6:formattedDate="July";break;case 7:formattedDate="August";break;case 8:formattedDate="September";break;case 9:formattedDate="October";break;case 10:formattedDate="November";break;case 11:formattedDate="December"}formattedDate=formattedDate+" "+date.getDate()+", "+date.getFullYear(),$scope.video.snippet.publishedAt=formattedDate}function preserveDescription(){var description=$scope.video.snippet.description;description=preserveLinks(description),description=description.replace(/\n/g,"<br>"),$scope.video.snippet.description=description}function preserveLinks(d){return d=d.replace(/(http:\/\/[^\s]+)/gi,'<a href="$1">$1</a>'),d=d.replace(/(https:\/\/[^\s]+)/gi,'<a href="$1">$1</a>')}var video_id=$location.path().substr(8,$location.path().length-1);$http.get("https://www.googleapis.com/youtube/v3/videos?part=snippet&id="+video_id+"&key="+$scope.settings.api_key).success(function(res){$scope.video=res.items[0],setPublishAtDate(),preserveDescription(),$scope.video.player=$sce.trustAsResourceUrl("https://www.youtube.com/embed/"+video_id+"?autoplay=0&showinfo=0"),s(".show-hide").on("click",function(){s(".description").hasClass("full")[0]?(s(".description").removeClass("full"),s(this).innerHtml("Show More")):(s(".description").addClass("full"),s(this).innerHtml("Hide"))})})}).filter("unsafe",function($sce){return function(val){return $sce.trustAsHtml(val)}}),angular.module("videosCtrl",[]).controller("videosController",function($http,$scope){function getVideos(){$http.get(" https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails%2C+snippet&playlistId="+$scope.uploadsPlaylistId+"&key="+$scope.settings.api_key).success(function(res){$scope.videos=res.items})}$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.uploadsPlaylistId=res.items[0].contentDetails.relatedPlaylists.uploads,getVideos()})});var route=angular.module("app.routes",["ngRoute"]);route.config(function($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"app/views/home.html",controller:"homeController",controllerAs:"home"}).when("/videos/",{templateUrl:"app/views/videos.html",controller:"videosController",controllerAs:"videos"}).when("/videos/:video_id",{templateUrl:"app/views/video.html",controller:"videoController",controllerAs:"video"}).when("/playlists/",{templateUrl:"app/views/playlists.html",controller:"playlistsController",controllerAs:"playlists"}).when("/playlists/:playlist_id",{templateUrl:"app/views/playlist.html",controller:"playlistController",controllerAs:"playlist"}).when("/404",{templateUrl:"app/views/404.html"})}),angular.module("videoServiceProvider",[]).service("videoService",function($http){});