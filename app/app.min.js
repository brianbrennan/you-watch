var myApp=angular.module("myApp",["videoServiceProvider","app.routes","mainCtrl","redirectAuthCtrl","authCtrl","videosCtrl","videoCtrl","playlistsCtrl","playlistCtrl","homeCtrl","ggCtrl","stCtrl","gcCtrl","animatedCtrl","bestOfCtrl","tableFlipCtrl","oneOffsCtrl","guildGrumpsCtrl","commercialsCtrl","searchCtrl","youtube-embed","videoSidebarDrct","videoSnippetSidebarDrct"]);angular.module("animatedCtrl",[]).controller("animatedController",function($scope,$http){function getVideos(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLC4E9F4F6136EF251&maxResults=9&key="+$scope.settings.api_key).success(function(res){$scope.videos=[],$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLC4E9F4F6136EF251&pageToken="+$scope.nextToken+"&maxResults=9&key="+$scope.settings.api_key).success(function(res){$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}$scope.loading=!0,getVideos(),s(".show-hide").on("click",function(){getMore()}),$scope.sortDate=function(v){var date=new Date(v.snippet.publishedAt);return date}}),angular.module("authCtrl",[]).controller("authController",function($location,$http,$window,$rootScope,$scope){var token=$location.search();token.error&&$location.path($rootScope.getCookie("ggLastPage")),$http.get("https://www.googleapis.com/oauth2/v1/tokeninfo?access_token="+token.access_token).success(function(res){return console.log(res),res.audience!=$scope.settings.client_id?void $location.path($rootScope.getCookie("ggLastPage")):(console.log(res),console.log($rootScope.getCookie("ggLastPage")),$rootScope.setCookie("ggAuthentication",token.access_token,1/24),void $location.url($rootScope.getCookie("ggLastPage")))})}),angular.module("bestOfCtrl",[]).controller("bestOfController",function($scope,$http){function getVideos(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLRQGRBgN_Enp7Z8-nL2FPZh5XPX5xdBOH&maxResults=9&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.videos=[],$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLRQGRBgN_Enp7Z8-nL2FPZh5XPX5xdBOH&pageToken="+$scope.nextToken+"&maxResults=9&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}$scope.loading=!0,getVideos(),s(".show-hide").on("click",function(){getMore()}),$scope.sortDate=function(v){var date=new Date(v.snippet.publishedAt);return date}}),angular.module("commercialsCtrl",[]).controller("commercialsController",function($scope,$http){function getVideos(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLRQGRBgN_EnqizkZXJB4LP-af3Gum7Uhe&maxResults=9&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.videos=[],$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLRQGRBgN_EnqizkZXJB4LP-af3Gum7Uhe&pageToken="+$scope.nextToken+"&maxResults=9&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}$scope.loading=!0,getVideos(),s(".show-hide").on("click",function(){getMore()}),$scope.sortDate=function(v){var date=new Date(v.snippet.publishedAt);return date}}),angular.module("gcCtrl",[]).controller("gcController",function($scope,$http){function getVideos(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId="+$scope.uploadPlaylist+"&maxResults=20&key="+$scope.settings.api_key).success(function(res){$scope.videos=[],$scope.nextToken=res.nextPageToken;for(var none=!0,i=0;i<res.items.length;i++){var index=res.items[i].snippet.title.indexOf("Grumpcade");index>0&&($scope.videos.push(res.items[i]),none=!1)}none?getMore():$scope.loading=!1,console.log($scope.videos)})}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId="+$scope.uploadPlaylist+"&pageToken="+$scope.nextToken+"&maxResults=20&key="+$scope.settings.api_key).success(function(res){$scope.nextToken=res.nextPageToken;for(var none=!0,i=0;i<res.items.length;i++){var index=res.items[i].snippet.title.indexOf("Grumpcade");index>0&&($scope.videos.push(res.items[i]),none=!1)}none?getMore():$scope.loading=!1})}$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.channelId=res.items[0].id,$scope.uploadPlaylist=res.items[0].contentDetails.relatedPlaylists.uploads,getVideos(),s(".show-hide").on("click",function(){getMore()}),s("header").addClass("grumpcade")}),$scope.sortDate=function(v){var date=new Date(v.snippet.publishedAt);return date}}),angular.module("ggCtrl",[]).controller("ggController",function($scope,$http){function getVideos(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId="+$scope.uploadPlaylist+"&maxResults=20&key="+$scope.settings.api_key).success(function(res){$scope.videos=[],$scope.nextToken=res.nextPageToken;for(var none=!0,i=0;i<res.items.length;i++){var index=res.items[i].snippet.title.indexOf("Game Grumps");index>0&&($scope.videos.push(res.items[i]),none=!1)}none?getMore():$scope.loading=!1})}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId="+$scope.uploadPlaylist+"&pageToken="+$scope.nextToken+"&maxResults=20&key="+$scope.settings.api_key).success(function(res){$scope.nextToken=res.nextPageToken;for(var none=!0,i=0;i<res.items.length;i++){var index=res.items[i].snippet.title.indexOf("Game Grumps");index>0&&($scope.videos.push(res.items[i]),none=!1)}none?getMore():$scope.loading=!1})}$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.channelId=res.items[0].id,$scope.uploadPlaylist=res.items[0].contentDetails.relatedPlaylists.uploads,getVideos(),s(".show-hide").on("click",function(){getMore()})}),$scope.sortDate=function(v){var date=new Date(v.snippet.publishedAt);return date}}),angular.module("guildGrumpsCtrl",[]).controller("guildGrumpsController",function($scope,$http){function getVideos(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLRQGRBgN_EnrXvUE3FvmOws1y5SPDCbDX&maxResults=9&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.videos=[],$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLRQGRBgN_EnrXvUE3FvmOws1y5SPDCbDX&pageToken="+$scope.nextToken+"&maxResults=9&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}$scope.loading=!0,getVideos(),s(".show-hide").on("click",function(){getMore()}),$scope.sortDate=function(v){var date=new Date(v.snippet.publishedAt);return date}}),angular.module("homeCtrl",[]).controller("homeController",function($http,$scope,$rootScope){function getVideos(){$http.get(" https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2ccontentDetails&playlistId="+$scope.uploadsPlaylistId+"&maxResults=4&key="+$scope.settings.api_key).success(function(res){$scope.mostRecent=res.items,$scope.recentLoading=!1})}$rootScope.pageTitle="Game Grumps | A Fan Made Site",$scope.recentLoading=!0,$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.uploadsPlaylistId=res.items[0].contentDetails.relatedPlaylists.uploads,getVideos()})}),angular.module("mainCtrl",[]).controller("mainController",function($http,$scope,$rootScope,$window,$location){$rootScope.pageTitle="Game Grumps | A Fan Made Site",$http.get("app/model/settings.json").success(function(res){$rootScope.settings=res}),s(".sub-head").on("mouseenter",function(){s(".sub").css("display","block")}).on("mouseleave",function(){s(".sub").css("display","none")}),$rootScope.$on("$locationChangeStart",function(event,next,current){s("header").removeClass()}),$rootScope.$on("$routeChangeSuccess",function(event,next,current){$window.ga("send","pageview",{page:$location.path()})}),$rootScope.isAuth=function(){return $rootScope.getCookie("ggAuthentication")?!0:!1},$rootScope.checkAuth=function(){$rootScope.isAuth()||($rootScope.setCookie("ggLastPage",$location.path(),1),window.location="https://accounts.google.com/o/oauth2/auth?client_id="+$scope.settings.client_id+"&redirect_uri=http%3A%2F%2Fgamegrumps	%2Eco&response_type=token&scope=https%3A%2F%2Fwww%2Egoogleapis%2Ecom%2Fauth%2Fyoutube%2Eforce-ssl")},$rootScope.setCookie=function(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires},$rootScope.getCookie=function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return!1}}),angular.module("oneOffsCtrl",[]).controller("oneOffsController",function($scope,$http){function getVideos(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLRQGRBgN_EnqIWG6TuaGLWmn9NLcaHi7P&maxResults=9&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.videos=[],$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLRQGRBgN_EnqIWG6TuaGLWmn9NLcaHi7P&pageToken="+$scope.nextToken+"&maxResults=9&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}$scope.loading=!0,getVideos(),s(".show-hide").on("click",function(){getMore()}),$scope.sortDate=function(v){var date=new Date(v.snippet.publishedAt);return date}}),angular.module("playlistCtrl",[]).controller("playlistController",function($http,$scope,$location,$sce,$rootScope){function getVideos(){$http.get(" https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails%2C+snippet&playlistId="+playlistId+"&maxResults=9&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.videos=res.items,$scope.nextToken=res.nextPageToken,getPlaylistName(),$scope.loading=!1})}function getPlaylistName(){$http.get("https://www.googleapis.com/youtube/v3/playlists?part=snippet&id="+playlistId+"&key="+$scope.settings.api_key).success(function(res){$scope.playlistTitle=res.items[0].snippet.title,$rootScope.pageTitle=$scope.playlistTitle+" Playlist"})}function getMore(){$scope.loading=!0,$http.get(" https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails%2C+snippet&playlistId="+playlistId+"&maxResults=9&pageToken="+$scope.nextToken+"&key="+$scope.settings.api_key).success(function(res){for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.nextToken=res.nextPageToken,$scope.loading=!1})}var playlistId=$location.path().substr(11,$location.path().length-1);$scope.loading=!0,$scope.finished=!1,getVideos(),s(".show-hide").on("click",function(){getMore()})}),angular.module("playlistsCtrl",[]).controller("playlistsController",function($http,$scope,$location,$rootScope){function getPlaylists(){$http.get("https://www.googleapis.com/youtube/v3/playlists?part=contentDetails%2csnippet&channelId="+$scope.channelId+"&maxResults=9&key="+$scope.settings.api_key).success(function(res){$scope.playlists=res.items,$scope.nextToken=res.nextPageToken}),$scope.loading=!1}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlists?part=contentDetails%2csnippet&channelId="+$scope.channelId+"&maxResults=9&pageToken="+$scope.nextToken+"&key="+$scope.settings.api_key).success(function(res){for(var i=0;i<res.items.length;i++)$scope.playlists.push(res.items[i]);$scope.nextToken=res.nextPageToken,$scope.loading=!1})}$rootScope.pageTitle="Game Grumps Playlists",$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.channelId=res.items[0].id,getPlaylists(),s(".show-hide").on("click",function(){getMore()})})}),angular.module("redirectAuthCtrl",[]).controller("redirectAuthController",function($http,$scope,$rootScope,$window,$location){var token=$location.path().substring(1,$location.path().length);$location.url("auth?"+token)}),angular.module("searchCtrl",[]).controller("searchController",function($scope,$http,$rootScope){$rootScope.pageTitle="JonTron can't melt steel beams",$scope.findQuery=function(){$scope.searchLoading=!0,$scope.searchQuery.length>1&&$http.get("https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=6&channelId="+$scope.settings.channelId+"&q="+$scope.searchQuery+"&key="+$scope.settings.api_key).success(function(res){$scope.results=res,$scope.searchLoading=!1,console.log(res)})},$scope.findMore=function(){$scope.searchLoading=!0,$http.get("https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=6&channelId="+$scope.settings.channelId+"&q="+$scope.searchQuery+"&pageToken= "+$scope.results.nextPageToken+"&type=video&key="+$scope.settings.api_key).success(function(res){$scope.results.nextPageToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.results.items.push(res.items[i]);$scope.searchLoading=!1})}}),angular.module("stCtrl",[]).controller("stController",function($scope,$http){function getVideos(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId="+$scope.uploadPlaylist+"&maxResults=20&key="+$scope.settings.api_key).success(function(res){$scope.videos=[],$scope.nextToken=res.nextPageToken;for(var none=!0,i=0;i<res.items.length;i++){var index=res.items[i].snippet.title.indexOf("Steam Train");index>0&&($scope.videos.push(res.items[i]),none=!1)}none?getMore():$scope.loading=!1})}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId="+$scope.uploadPlaylist+"&pageToken="+$scope.nextToken+"&maxResults=20&key="+$scope.settings.api_key).success(function(res){$scope.nextToken=res.nextPageToken;for(var none=!0,i=0;i<res.items.length;i++){var index=res.items[i].snippet.title.indexOf("Steam Train");index>0&&($scope.videos.push(res.items[i]),none=!1)}none?getMore():$scope.loading=!1})}$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.channelId=res.items[0].id,$scope.uploadPlaylist=res.items[0].contentDetails.relatedPlaylists.uploads,getVideos(),s(".show-hide").on("click",function(){getMore()}),s("header").addClass("steam-train")}),$scope.sortDate=function(v){var date=new Date(v.snippet.publishedAt);return date}}),angular.module("tableFlipCtrl",[]).controller("tableFlipController",function($scope,$http){function getVideos(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLRQGRBgN_Enr29rZZEzgSAQ21HjZXY0bv&maxResults=9&key="+$scope.settings.api_key).success(function(res){$scope.videos=[],$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLRQGRBgN_Enr29rZZEzgSAQ21HjZXY0bv&pageToken="+$scope.nextToken+"&maxResults=9&key="+$scope.settings.api_key).success(function(res){$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}$scope.loading=!0,getVideos(),s(".show-hide").on("click",function(){getMore()}),s("header").addClass("table-flip"),$scope.sortDate=function(v){var date=new Date(v.snippet.publishedAt);return date}}),function(){function videoController($http,$scope,$location,$sce,$rootScope){var vm=this,video_id=$location.path().substr(8,$location.path().length-1);$http.get("https://www.googleapis.com/youtube/v3/videos?part=snippet%2cstatistics&id="+video_id+"&key="+$scope.settings.api_key).success(function(res){vm.video=res.items[0],vm.checkPage(),vm.autoplay="true"===getCookie("gamegrumpsAutoplay")?1:0,vm.video_id=video_id,vm.playerHeight=480,vm.playerWidth=854,vm.playerVars={showinfo:0,autoplay:vm.autoplay},vm.video.statistics.viewCount=vm.numberWithCommas(vm.video.statistics.viewCount),vm.video.statistics.likeCount=vm.numberWithCommas(vm.video.statistics.likeCount),vm.video.statistics.dislikeCount=vm.numberWithCommas(vm.video.statistics.dislikeCount),vm.recentLoading=!0,vm.nextLoading=!0,vm.setPublishAtDate(),vm.preserveDescription(),vm.setAutoplay(),vm.infoBox(),vm.checkShow(),vm.theatreToggle(),vm.getUser(),vm.configRating(),vm.configComments(),vm.configFullscreen()}),vm.checkPage=function(){$rootScope.pageTitle=vm.video.snippet.title,("undefined"==typeof vm.video||vm.video.snippet.channelId!=$rootScope.settings.channelId)&&$location.path("/404")},vm.setPublishAtDate=function(){var date=new Date(vm.video.snippet.publishedAt),formattedDate="";switch(date.getMonth()){case 0:formattedDate="January";break;case 1:formattedDate="February";break;case 2:formattedDate="March";break;case 3:formattedDate="April";break;case 4:formattedDate="May";break;case 5:formattedDate="June";break;case 6:formattedDate="July";break;case 7:formattedDate="August";break;case 8:formattedDate="September";break;case 9:formattedDate="October";break;case 10:formattedDate="November";break;case 11:formattedDate="December"}formattedDate=formattedDate+" "+date.getDate()+", "+date.getFullYear(),vm.video.snippet.publishedAt=formattedDate},vm.preserveDescription=function(){var description=vm.video.snippet.description;description=vm.preserveLinks(description),description=description.replace(/\n/g,"<br>"),vm.video.snippet.description=description},vm.preserveLinks=function(d){return d=d.replace(/(http:\/\/[^\s]+)/gi,'<a href="$1">$1</a>'),d=d.replace(/(https:\/\/[^\s]+)/gi,'<a href="$1">$1</a>')},vm.numberWithCommas=function(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},vm.checkShow=function(){var title=vm.video.snippet.title;title.indexOf("Grumpcade")>=0?s("header").addClass("grumpcade"):title.indexOf("Steam Train")>=0?s("header").addClass("steam-train"):title.indexOf("Table Flip")>=0?s("header").addClass("table-flip"):s("header").removeClass()},vm.setAutoplay=function(){$scope.$on("youtube.player.ended",function($event,player){1===vm.autoplay&&$location.path("/videos/"+vm.nextVideo.id.videoId)}),1===vm.autoplay&&s(".toggle").addClass("active"),s(".toggle").on("click",function(e){s(this).hasClass("active")[0]?(s(this).removeClass("active"),$rootScope.setCookie("gamegrumpsAutoplay",!1,2)):(s(this).addClass("active"),setCookie("gamegrumpsAutoplay",!0,2),$scope.$on("youtube.player.ended",function($event,player){"true"==$rootScope.getCookie("gamegrumpsAutoplay")&&$location.path("/videos/"+vm.nextVideo.id.videoId)}))})},vm.infoBox=function(){s(".show-hide").on("click",function(){s(".description").hasClass("full")[0]?(s(".description").removeClass("full"),s(this).innerHtml("Show More")):(s(".description").addClass("full"),s(this).innerHtml("Hide"))});var likes=Number(vm.video.statistics.likeCount),total=Number(vm.video.statistics.dislikeCount)+likes;likeRatio=likes/total*100,s(".like-bar").css("width",String(likeRatio+"%"))},vm.configComments=function(){var loadedComments=!0;document.addEventListener("scroll",function(){document.getElementsByTagName("body")[0].scrollTop>240&&loadedComments&&(vm.getComments(),loadedComments=!1)})},vm.getComments=function(){vm.commentsLoading=!0,$http.get("https://www.googleapis.com/youtube/v3/commentThreads?part=snippet&videoId="+video_id+"&order=relevance&maxResults=5&key="+$scope.settings.api_key).success(function(res){vm.nextCommentPageToken=res.nextPageToken,vm.comments=res.items,vm.commentsLoading=!1})},vm.getReplies=function(i){vm.comments[i].repliesLoadingMore=!0,vm.comments[i].replies?vm.comments[i].replies.nextPageToken&&$http.get("https://www.googleapis.com/youtube/v3/comments?part=snippet&parentId="+vm.comments[i].id+"&order=relevance&maxResults=5&pageToken="+vm.comments[i].replies.nextPageToken+"&key="+$rootScope.settings.api_key).success(function(res){console.log(res);for(var j=0;j<res.items.length;j++)vm.comments[i].replies.items.push(res.items[j]);vm.comments[i].replies.nextPageToken=res.nextPageToken,console.log(vm.comments[i]),vm.comments[i].repliesLoadingMore=!1}):$http.get("https://www.googleapis.com/youtube/v3/comments?part=snippet&parentId="+vm.comments[i].id+"&order=relevance&maxResults=5&key="+$rootScope.settings.api_key).success(function(res){vm.comments[i].replies=res,console.log(vm.comments[i]),vm.comments[i].repliesLoadingMore=!1})},vm.getMoreComments=function(){vm.moreCommentsLoading=!0,console.log(vm.nextCommentPageToken),$http.get("https://www.googleapis.com/youtube/v3/commentThreads?part=snippet&videoId="+video_id+"&order=relevance&maxResults=5&pageToken="+vm.nextCommentPageToken+"&key="+$rootScope.settings.api_key).success(function(res){vm.nextCommentPageToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)vm.comments.push(res.items[i]);vm.moreCommentsLoading=!1})},vm.convertTime=function(time){var time=(new Date,new Date(time));return time.getFullYear},vm.theatreToggle=function(){"true"===getCookie("gamegrumpsTheatreMode")&&(vm.theatreMode(!1),s(".theatre").addClass("active")),s(".theatre").on("click",function(e){s(this).hasClass("active")[0]?(vm.theatreMode(!0),s(this).removeClass("active")):(vm.theatreMode(!1),s(this).addClass("active"))})},vm.theatreMode=function(b){b?(setCookie("gamegrumpsTheatreMode","false",2),s("#player").css("width","854px"),s("#player").css("height","480px"),s(".right").removeClass("theatreDown")):(setCookie("gamegrumpsTheatreMode","true",2),s(".right").addClass("theatreDown"),window.setTimeout(function(){s("#player").css("width","1160px"),s("#player").css("height","652px")},300))},vm.getUser=function(){$rootScope.isAuth()&&$http.get("https://www.googleapis.com/youtube/v3/channels?part=snippet&mine=true&key="+$rootScope.settings.api_key+"&access_token="+$rootScope.getCookie("ggAuthentication")).success(function(res){vm.user=res.items[0],console.log(res)})},vm.configRating=function(){s(".vid-info .thumb").on("click",function(e){s(this).hasClass("active")[0]?s(this).removeClass("active"):(s(".vid-info .thumb").removeClass("active"),s(this).addClass("active"))})};var vidRated=!1;vm.rate=function(i){if($rootScope.checkAuth(),$rootScope.isAuth()){var rating;vidRated?(rating="none",vidRated=!1):1==i?(rating="like",vidRated=!0):0==i&&(rating="dislike",vidRated=!0),$http.post("https://www.googleapis.com/youtube/v3/videos/rate?id="+video_id+"&rating="+rating+"&key="+$rootScope.settings.api_key+"&access_token="+$rootScope.getCookie("ggAuthentication"))}},vm.newComment=function(){if($rootScope.checkAuth(),$rootScope.isAuth()){var data={snippet:{videoId:video_id,channelId:vm.user.channelId,topLevelComment:{snippet:{textOriginal:vm.postingComment}}}};data.snippet.topLevelComment.snippet.textDisplay=data.snippet.topLevelComment.snippet.textOriginal,console.log(data),$http.post("https://www.googleapis.com/youtube/v3/commentThreads?part=snippet&videoId="+video_id+"&key="+$rootScope.settings.api_key+"&access_token="+$rootScope.getCookie("ggAuthentication"),data).success(function(res){$scope.comments||getComments(),$scope.comments.unshift(res),$scope.postingComment=""})}},vm.newReply=function(p){if($rootScope.checkAuth(),$rootScope.isAuth()){var snippet={};snippet.textOriginal=$scope.postingReply,snippet.parentId=p}},vm.configFullscreen=function(){s(".ytp-fullscreen-button").on("click",function(){$rootScope.getCookie("fullScreenMode")&&"false"!=!$rootScope.getCookie("fullScreenMode")?vm.fullScreen(!0):vm.fullScreen(!0)})},vm.fullScreen=function(d){d?$rootScope.setCookie("fullscreenMode","true"):$rootScope.setCookie("fullscreenMode","false")}}function unsafeFilter($sce){return function(val){return $sce.trustAsHtml(val)}}function setCookie(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires}function getCookie(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return!1}angular.module("videoCtrl",[]).controller("videoController",videoController).filter("unsafe",unsafeFilter)}(),angular.module("videosCtrl",[]).controller("videosController",function($http,$scope){function getVideos(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId="+$scope.uploadPlaylist+"&maxResults=9&key="+$scope.settings.api_key).success(function(res){$scope.videos=[],$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);console.log($scope.videos),$scope.loading=!1})}function getMore(){$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId="+$scope.uploadPlaylist+"&pageToken="+$scope.nextToken+"&maxResults=9&key="+$scope.settings.api_key).success(function(res){console.log(res),$scope.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)$scope.videos.push(res.items[i]);$scope.loading=!1})}$scope.loading=!0,$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$scope.settings.channel+"&key="+$scope.settings.api_key).success(function(res){$scope.channelId=res.items[0].id,$scope.uploadPlaylist=res.items[0].contentDetails.relatedPlaylists.uploads,getVideos(),s(".show-hide").on("click",function(){getMore()})}),$scope.sortDate=function(v){var date=new Date(v.snippet.publishedAt);return date}});var route=angular.module("app.routes",["ngRoute"]);route.config(function($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"app/views/home.html",controller:"homeController",controllerAs:"home"}).when("/videos/",{templateUrl:"app/views/videos.html",controller:"videosController",controllerAs:"videos"}).when("/videos/:video_id",{templateUrl:"app/views/video.html",controller:"videoController",controllerAs:"videoc"}).when("/playlists/",{templateUrl:"app/views/playlists.html",controller:"playlistsController",controllerAs:"playlists"}).when("/playlists/:playlist_id",{templateUrl:"app/views/playlist.html",controller:"playlistController",controllerAs:"playlist"}).when("/gg/",{templateUrl:"app/views/gg.html",controller:"ggController",controllerAs:"gg"}).when("/steam-train/",{templateUrl:"app/views/st.html",controller:"stController",controllerAs:"st"}).when("/grumpcade/",{templateUrl:"app/views/gc.html",controller:"gcController",controllerAs:"gc"}).when("/animated",{templateUrl:"app/views/animated.html",controller:"animatedController",controllerAs:"animated"}).when("/best-of",{templateUrl:"app/views/bestOf.html",controller:"bestOfController",controllerAs:"bestOf"}).when("/table-flip",{templateUrl:"app/views/tableFlip.html",controller:"tableFlipController",controllerAs:"tableFlip"}).when("/one-offs",{templateUrl:"app/views/oneOffs.html",controller:"oneOffsController",controllerAs:"oneOffs"}).when("/guild-grumps",{templateUrl:"app/views/guildGrumps.html",controller:"guildGrumpsController",controllerAs:"guildGrumps"}).when("/commercials",{templateUrl:"app/views/commercials.html",controller:"commercialsController",controllerAs:"commercials"}).when("/search",{templateUrl:"app/views/search.html",controller:"searchController",controllerAs:"search"}).when("/404",{templateUrl:"app/views/404.html"}).when("/access_token:anything",{templateUrl:"app/views/authScreen.html",controller:"redirectAuthController",controllerAs:"redirect"}).when("/auth",{templateUrl:"app/views/authScreen.html",controller:"authController",controllerAs:"auth"}).when("/:anything",{templateUrl:"app/views/404.html"})}),angular.module("videoServiceProvider",[]).service("videoService",function($http){}),function(){function videoSidebar(){return{restrict:"EA",name:"video-sidebar",templateUrl:"app/views/partials/sidebar.html"}}angular.module("videoSidebarDrct",[]).directive("videoSidebar",videoSidebar)}(),function(){function videoSnippetSidebarController($scope,$attrs,$location,$http,$rootScope){function getVideos(s){vm.snippetLoading=!0,$http.get("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+$rootScope.settings.channel+"&key="+$rootScope.settings.api_key).success(function(res){vm.channelId=res.items[0].id,vm.uploadPlaylist=res.items[0].contentDetails.relatedPlaylists.uploads,"whatsUpNext"==s?getNextVideo():"relatedVideos"==s?getRelatedVideos():"recentUploads"==s&&getRecentUploads()})}function getNextVideo(){$http.get("https://www.googleapis.com/youtube/v3/search?part=snippet&channelId="+$rootScope.settings.channelId+"&relatedToVideoId="+$location.path().substr(8,$location.path().length-1)+"&channelId="+$rootScope.settings.channelId+"&maxResults=5&type=video&key="+$rootScope.settings.api_key).success(function(res){res.items[0].snippet.channelId==$rootScope.settings.channelId&&(vm.videos[0]=res.items[0]),vm.snippetLoading=!1})}function getRelatedVideos(){$http.get("https://www.googleapis.com/youtube/v3/search?part=snippet&channelId="+$rootScope.settings.channelId+"&relatedToVideoId="+$location.path().substr(8,$location.path().length-1)+"&channelId="+$rootScope.settings.channelId+"&maxResults=5&type=video&key="+$rootScope.settings.api_key).success(function(res){for(var i=1;i<res.items.length;i++)res.items[i].snippet.channelId==$rootScope.settings.channelId&&vm.videos.push(res.items[i]);vm.snippetLoading=!1})}function getRecentUploads(){$http.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId="+vm.uploadPlaylist+"&maxResults=5&key="+$rootScope.settings.api_key).success(function(res){vm.nextToken=res.nextPageToken;for(var i=0;i<res.items.length;i++)vm.videos.push(res.items[i]);vm.snippetLoading=!1})}var vm=this;vm.videoType=$attrs.videos,vm.videos=[],getVideos(vm.videoType)}function videoSnippetSidebar(){return{restrict:"EA",name:"video-sidebar",templateUrl:"app/views/partials/video-snippet-sidebar.html",transclude:!0,controller:"videoSnippetSidebarController",controllerAs:"videoSnippet",bindToController:!0,scope:{}}}angular.module("videoSnippetSidebarDrct",[]).controller("videoSnippetSidebarController",videoSnippetSidebarController).directive("videoSnippetSidebar",videoSnippetSidebar)}();